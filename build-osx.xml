<?xml version = "1.0" encoding = "utf-8"?>
<project name = "OWL Ontology Server Deployment" default = "install" basedir = ".">

	<taskdef name="check.dependencies" classname="org.protege.ant.ProtegeDependencies">
		<classpath>
			<pathelement location="${dev.tools}" />
		</classpath>
	</taskdef>

	<target name="init">
		<check.dependencies>
			<property name="owl.lib"
				location="${server.prefix}/bundles/org.semanticweb.owl.owlapi.jar" />
			<property name="server.lib"
				location="${server.prefix}/bundles/org.protege.owl.server.jar" />
		</check.dependencies>
		<path id="project.classpath">
			<pathelement location="${owl.lib}" />
			<pathelement location="${server.lib}" />
		</path>
	</target>  


	<target name = "deploy">
	    <copy file="./etc/unix.scripts/init.d/logging-unix.properties"
          todir="${install.prefix}"/>
        
    <java classname="org.protege.owl.server.command.SetMetaprojectDataDir"
	  fork="true"
    	  failonerror="true">
        <classpath>
          <pathelement path="${classes}"/>
          <path refid="project.classpath"/>
        </classpath>
    	<arg value="${install.prefix}/server/metaproject.owl"/>
    	<arg value="${install.prefix}/data"/>
  	</java>
    <java classname="org.protege.owl.server.command.SetMetaProjectPort"
	  fork="true"
    	  failonerror="true">
        <classpath>
          <pathelement path="${classes}"/>
          <path refid="project.classpath"/>
        </classpath>
    	<arg value="${install.prefix}/server/metaproject.owl"/>
    	<arg value="${install.port}"/>
  	</java>
	</target>
</project>